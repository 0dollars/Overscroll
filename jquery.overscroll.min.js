/*
 * Overscroll v1.3.0
 *  A jQuery Plugin for emulating the iPhone scrolling experience in a browser.
 *  http://azoffdesign.com/plugins/js/overscroll
 *
 * Intended for use with the latest jQuery
 *  http://code.jquery.com/jquery-latest.min.js
 *
 * Copyright 2010, Jonathan Azoff
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *  http://jquery.org/license
 *
 * Date: Wednesday, March 31st 2010
 */
"use strict";(function(a,b){b=a.fn.overscroll=function(c){return this.each(function(){b.init(a(this),c)})};a.extend(b,{events:{wheel:"mousewheel DOMMouseScroll",start:"select mousedown touchstart",drag:"mousemove touchmove",end:"mouseup mouseleave touchend",scroll:"scroll",ignored:"dragstart drag"},clearfixElement:a("<div/>").css({content:".",display:"block",clear:"both",visibility:"hidden","line-height":0,height:0}),constants:{scrollDuration:800,captureThreshold:4,wheelDeltaMod:-18,scrollDeltaMod:5.7,thumbThickness:8,thumbOpacity:0.7},init:function(e,c,d){d={sizing:b.getSizing(e)};c=a.extend({openedCursor:"http://github.com/downloads/azoff/Overscroll/opened.cur",closedCursor:"http://github.com/downloads/azoff/Overscroll/closed.cur",showThumbs:true},(c||{}));e.css({cursor:"url("+c.openedCursor+"), default",overflow:"hidden"}).scrollTop(0).scrollLeft(0).bind(b.events.wheel,d,b.wheel).bind(b.events.start,d,b.start).bind(b.events.end,d,b.stop).bind(b.events.ignored,function(){return false});if(c.showThumbs){d.thumbs={visible:false};if(d.sizing.container.actual.width>d.sizing.container.current.width){d.thumbs.horizontal=a("<div/>").css(b.getThumbCss(d.sizing.thumbs.horizontal)).fadeTo(0,0);e.append(d.thumbs.horizontal)}if(d.sizing.container.actual.height>d.sizing.container.current.height){d.thumbs.vertical=a("<div/>").css(b.getThumbCss(d.sizing.thumbs.vertical)).fadeTo(0,0);e.append(d.thumbs.vertical)}d.marker={target:e.children(":first-child")};d.marker.left=d.marker.target.position().left;d.marker.top=d.marker.target.position().top;e.bind(b.events.scroll,d,b.scroll)}d.target=e;d.options=c},wheel:function(c,d){if(c.wheelDelta){d=c.wheelDelta/12000}if(c.detail){d=-c.detail/3}c.data.target.scrollTop(c.data.target.scrollTop()-(d*b.constants.wheelDeltaMod));return false},start:function(c){c.data.target.css("cursor","url("+c.data.options.closedCursor+"), default").bind(b.events.drag,c.data,b.drag).stop(true,true);c.data.position={x:c.pageX,y:c.pageY};c.data.capture={};c.data.isDragging=false;return false},drag:function(c){this.scrollLeft-=(c.pageX-c.data.position.x);this.scrollTop-=(c.pageY-c.data.position.y);c.data.position.x=c.pageX;c.data.position.y=c.pageY;if(typeof c.data.capture.index==="undefined"||--c.data.capture.index===0){c.data.isDragging=true;c.data.capture={x:c.pageX,y:c.pageY,index:b.constants.captureThreshold};if(c.data.thumbs&&!c.data.thumbs.visible){c.data.thumbs.visible=true;if(c.data.thumbs.vertical){c.data.thumbs.vertical.stop(true,true).fadeTo("fast",b.constants.thumbOpacity)}if(c.data.thumbs.horizontal){c.data.thumbs.horizontal.stop(true,true).fadeTo("fast",b.constants.thumbOpacity)}}}return true},scroll:function(d,c){c=d.data.marker.target.position();c.dx=(d.data.marker.left-c.left);c.dy=(d.data.marker.top-c.top);c.topHorizontal=c.dy+d.data.sizing.container.current.height-b.constants.thumbThickness;c.leftVertical=c.dx+d.data.sizing.container.current.width-b.constants.thumbThickness;if(d.data.thumbs.horizontal){c.left=c.dx*(1+d.data.sizing.container.current.width/d.data.sizing.container.actual.width);d.data.thumbs.horizontal.css("margin",c.topHorizontal+"px 0 0 "+c.left+"px")}if(d.data.thumbs.vertical){c.top=c.dy*(1+d.data.sizing.container.current.height/d.data.sizing.container.actual.height);d.data.thumbs.vertical.css("margin",c.top+"px 0 0 "+c.leftVertical+"px")}},stop:function(e,d,c){if(typeof e.data.position!=="undefined"){e.data.target.css("cursor","url("+e.data.options.openedCursor+"), default").unbind(b.events.drag,b.drag);if(e.data.isDragging){d=b.constants.scrollDeltaMod*(e.pageX-e.data.capture.x);c=b.constants.scrollDeltaMod*(e.pageY-e.data.capture.y);e.data.target.stop(true,true).animate({scrollLeft:this.scrollLeft-d,scrollTop:this.scrollTop-c},{queue:false,duration:b.constants.scrollDuration,easing:"cubicEaseOut",complete:function(){if(e.data.thumbs&&e.data.thumbs.visible){e.data.thumbs.visible=false;if(e.data.thumbs.vertical){e.data.thumbs.vertical.stop(true,true).fadeTo("fast",0)}if(e.data.thumbs.horizontal){e.data.thumbs.horizontal.stop(true,true).fadeTo("fast",0)}}}})}e.data.capture=e.data.position=undefined}return !e.data.isDragging},getSizing:function(d,c){d.css({overflow:"visible",height:"auto",position:"absolute",visibility:"hidden"}).append(b.clearfixElement);c={container:{actual:{height:d.height()}}};c.container.actual.width=d.css({width:"auto",height:""}).width();b.clearfixElement.remove();d.css({overflow:"hidden",width:"",position:"",visibility:"visible"});c.container.current={width:d.width(),height:d.height()};c.thumbs={horizontal:{width:c.container.current.width*c.container.current.width/c.container.actual.width,height:b.constants.thumbThickness,corner:b.constants.thumbThickness/2},vertical:{width:b.constants.thumbThickness,height:c.container.current.height*c.container.current.height/c.container.actual.height,corner:b.constants.thumbThickness/2}};return c},getThumbCss:function(c){return{position:"absolute","background-color":"black",width:c.width+"px",height:c.height+"px","-moz-border-radius":c.corner+"px","-webkit-border-radius":c.corner+"px","border-radius":c.corner+"px"}}});a.extend(a.easing,{cubicEaseOut:function(f,h,d,e){var g=d+e;return g*((f=f/1-1)*f*f+1)+d}})})(jQuery);